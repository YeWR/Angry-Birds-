{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\GameMenu.js"],"names":["cc","Class","extends","Component","properties","level_prefab","default","type","Prefab","level_clock_prefab","onLoad","resources","JSON","parse","sys","localStorage","getItem","number_levels","highest_level","stars","onLevelLayout","pos_x_min","pos_y_max","delta_x","delta_y","i","level","star","length","Number","instantiate","getComponent","init","x","parseInt","y","setPosition","p","node","addChild"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,UAASF,GAAGG,SADP;;AAGLC,aAAY;AACd;AACAC,gBAAe;AACdC,YAAU,IADI;AAEdC,SAAOP,GAAGQ;AAFI,GAFD;AAMdC,sBAAqB;AACpBH,YAAU,IADU;AAEpBC,SAAOP,GAAGQ;AAFU;AANP,EAHP;;AAeLE,SAAS,kBAAY;AACvB;AACA,MAAIC,YAAYC,KAAKC,KAAL,CAAWb,GAAGc,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,kBAA5B,CAAX,CAAhB;AACA;AACA,OAAKC,aAAL,GAAqBN,UAAUM,aAA/B;AACG;AACH,OAAKC,aAAL,GAAqBP,UAAUO,aAA/B;AACA;AACA,OAAKC,KAAL,GAAaR,UAAUQ,KAAvB;AACA;AACA,OAAKC,aAAL;AACA,EA1BO;;AA4BR;AACAA,gBAAgB,yBAAU;AACzB,MAAID,QAAQ,KAAKA,KAAjB;AACA,MAAME,YAAY,CAAC,GAAnB;AACA,MAAMC,YAAY,GAAlB;AACA,MAAMC,UAAU,GAAhB;AACA,MAAMC,UAAU,GAAhB;;AAEA,OAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAI,KAAKR,aAAxB,EAAuC,EAAEQ,CAAzC,EAA2C;AAC1C,OAAIC,QAAQ,IAAZ;AACA,OAAGD,IAAI,KAAKP,aAAZ,EAA0B;AACzB,QAAIS,OAAO,CAAX;AACA,QAAGF,IAAIN,MAAMS,MAAb,EAAoB;AACnBD,YAAOE,OAAOV,MAAMM,CAAN,CAAP,CAAP;AACA;AACDC,YAAQ1B,GAAG8B,WAAH,CAAe,KAAKzB,YAApB,CAAR;AACAqB,UAAMK,YAAN,CAAmB,OAAnB,EAA4BC,IAA5B,CAAiCP,IAAI,CAArC,EAAwCE,IAAxC;AACA,IAPD,MAQI;AACHD,YAAQ1B,GAAG8B,WAAH,CAAe,KAAKrB,kBAApB,CAAR;AACA;AACD,OAAIwB,IAAIZ,YAAYE,UAAUW,SAAST,IAAI,CAAb,CAA9B;AACA,OAAIU,IAAIb,YAAYE,UAAUU,SAAST,IAAI,CAAb,CAA9B;;AAEAC,SAAMU,WAAN,CAAkBpC,GAAGqC,CAAH,CAAKJ,CAAL,EAAQE,CAAR,CAAlB;;AAEA,QAAKG,IAAL,CAAUC,QAAV,CAAmBb,KAAnB;AACA;AACD;AAxDO,CAAT","file":"GameMenu.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\t//关卡预制资源\r\n\t\tlevel_prefab : {\r\n\t\t\tdefault : null,\r\n\t\t\ttype : cc.Prefab\r\n\t\t},\r\n\t\tlevel_clock_prefab : {\r\n\t\t\tdefault : null,\r\n\t\t\ttype : cc.Prefab\r\n\t\t},   \t\r\n    },\r\n\r\n    onLoad : function () {\r\n\t\t// 所有资源\r\n\t\tlet resources = JSON.parse(cc.sys.localStorage.getItem('player_resources'));\r\n\t\t// 获取总关卡\r\n\t\tthis.number_levels = resources.number_levels;\r\n    \t// 获取本地数据——最高关卡\r\n\t\tthis.highest_level = resources.highest_level;\r\n\t\t// 获取本地数据——星星数量\r\n\t\tthis.stars = resources.stars;\r\n\t\t//绘制关卡界面\r\n\t\tthis.onLevelLayout();\t\r\n\t},\r\n\r\n\t//关卡界面，每行放4关\r\n\tonLevelLayout : function(){\r\n\t\tlet stars = this.stars;\r\n\t\tconst pos_x_min = -300;\r\n\t\tconst pos_y_max = 200;\r\n\t\tconst delta_x = 200;\r\n\t\tconst delta_y = 200;\r\n\t\t\r\n\t\tfor(let i = 0; i < this.number_levels; ++i){\r\n\t\t\tlet level = null;\r\n\t\t\tif(i < this.highest_level){\r\n\t\t\t\tlet star = 0;\r\n\t\t\t\tif(i < stars.length){\r\n\t\t\t\t\tstar = Number(stars[i]);\r\n\t\t\t\t}\r\n\t\t\t\tlevel = cc.instantiate(this.level_prefab);\r\n\t\t\t\tlevel.getComponent('Level').init(i + 1, star);\r\n\t\t\t} \r\n\t\t\telse{\r\n\t\t\t\tlevel = cc.instantiate(this.level_clock_prefab);\r\n\t\t\t}\r\n\t\t\tlet x = pos_x_min + delta_x * parseInt(i % 4);\r\n\t\t\tlet y = pos_y_max - delta_y * parseInt(i / 4);\r\n\t\t\t\r\n\t\t\tlevel.setPosition(cc.p(x, y));\r\n\r\n\t\t\tthis.node.addChild(level);\r\n\t\t}\r\n\t},\r\n});\r\n"]}